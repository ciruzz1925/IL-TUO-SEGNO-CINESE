<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zodiac Crafts 3D â€“ Mobile Version</title>
<meta name="description" content="Scopri il tuo segno zodiacale cinese con grafica e musica orientale su smartphone.">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@700&display=swap');

  body {
    background: linear-gradient(180deg, #100823 0%, #2b1645 60%, #1a0b2e 100%);
    margin: 0;
    padding: 0;
    color: #fff;
    font-family: "Noto Serif SC", serif;
    text-align: center;
    min-height: 100vh;
    overflow-x: hidden;
  }

  h1 {
    margin: 1em 0;
    font-size: 2em;
    font-family: 'Ma Shan Zheng', cursive;
    color: #FFD700;
    text-shadow: 0 0 15px rgba(255,215,0,0.8);
  }

  p {
    margin: 0 1em;
    font-size: 1em;
    color: #FFC870;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.7);
  }

  select, button {
    margin: 1em 0.5em;
    padding: 10px 15px;
    border: 2px solid #FFD700;
    border-radius: 6px;
    background: rgba(30, 20, 50, 0.9);
    color: #FFD700;
    font-size: 1em;
    font-family: 'Noto Serif SC', serif;
    font-weight: bold;
    cursor: pointer;
    z-index: 2;
    transition: 0.3s;
  }

  button:hover, select:hover {
    background: rgba(30, 20, 60, 1);
    box-shadow: 0 0 15px rgba(255,215,0,0.5);
  }

  #view3D {
    width: 160px;
    height: 160px;
    margin: 1em auto;
    perspective: 600px;
    z-index: 2;
  }

  #zodiacContainer {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    justify-items: center;
    margin: 1em 0;
    padding: 0 10px;
    z-index: 2;
  }

  .sign {
    width: 80px;
    aspect-ratio: 1/1.2; /* Adjusted for text below */
    background: rgba(255,215,0,0.15);
    border: 2px solid rgba(255,215,0,0.4);
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transform-style: preserve-3d;
    animation: spin 8s linear infinite;
    box-shadow: 0 0 10px rgba(255,215,0,0.3);
    transition: transform 0.2s ease;
    padding: 5px;
  }

  .sign:hover {
    transform: scale(1.1);
  }

  .sign img {
    width: 60px;
    height: 60px;
    object-fit: contain;
  }

  .sign p {
    margin: 5px 0 0;
    font-size: 0.8em;
    font-weight: bold;
    color: #000;
    text-shadow: 0 1px 0 #FFD700, 0 -1px 0 #FFD700, 1px 0 0 #FFD700, -1px 0 0 #FFD700,
                 1px 1px 0 #FFD700, 1px -1px 0 #FFD700, -1px 1px 0 #FFD700, -1px -1px 0 #FFD700;
  }

  @keyframes spin {
    from { transform: rotateY(0deg); }
    to { transform: rotateY(360deg); }
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: scale(0.8) rotateY(45deg); }
    to { opacity: 1; transform: scale(1) rotateY(45deg); }
  }
</style>
</head>
<body>

<h1>Scopri il tuo Segno Zodiacale Cinese</h1>
<p>Scegli lâ€™anno o ammira tutti i segni che ruotano in 3D.</p>

<select id="yearSelect" aria-label="Seleziona anno di nascita">
  <option value="">Seleziona anno...</option>
</select>

<button id="musicToggle">ðŸŽµ Avvia Musica</button>

<div id="view3D"></div>
<div id="zodiacContainer"></div>

<!-- MUSICA ORIENTALE FUNZIONANTE -->
<audio id="bgMusic" preload="auto" loop autoplay>
  <source src="https://www.fesliyanstudios.com/download-link.php?src=i&id=1582" type="audio/mpeg">
  Il tuo browser non supporta l'audio.
</audio>

<script>
const signs = [
  {name:"Topo", color:"#ffeda3", img:"topo.png"},
  {name:"Bue", color:"#ffc55b", img:"bue.png"},
  {name:"Tigre", color:"#e67a7a", img:"tigre.png"},
  {name:"Coniglio", color:"#b0d689", img:"coniglio.png"},
  {name:"Drago", color:"#8ecae6", img:"drago.png"},
  {name:"Serpente", color:"#dda15e", img:"serpente.png"},
  {name:"Cavallo", color:"#ff6700", img:"cavallo.png"},
  {name:"Capra", color:"#c2b9b0", img:"capra.png"},
  {name:"Scimmia", color:"#8b5cf6", img:"scimmia.png"},
  {name:"Gallo", color:"#ffb703", img:"gallo.png"},
  {name:"Cane", color:"#219ebc", img:"cane.png"},
  {name:"Maiale", color:"#fb8500", img:"maiale.png"}
];

// Griglia segni
const zodiacDiv = document.getElementById("zodiacContainer");
signs.forEach(s => {
  const div = document.createElement("div");
  div.className = "sign";
  div.style.backgroundColor = s.color;
  const img = document.createElement("img");
  img.src = s.img;
  img.alt = s.name;
  img.onerror = function() {
    this.style.display = 'none';
  };
  div.appendChild(img);
  const p = document.createElement("p");
  p.textContent = s.name;
  div.appendChild(p);
  zodiacDiv.appendChild(div);
});

// Popola anni
const select = document.getElementById("yearSelect");
for (let y = 1924; y <= 2025; y++) {
  const opt = document.createElement("option");
  opt.value = y;
  opt.textContent = y;
  select.appendChild(opt);
}

// Mostra segno selezionato
select.onchange = () => {
  const year = parseInt(select.value);
  if (!year) {
    document.getElementById("view3D").innerHTML = "";
    return;
  }
  const index = (year - 1924) % 12;
  const sign = signs[index];
  const viewDiv = document.getElementById("view3D");
  viewDiv.innerHTML = `
    <div style="width:140px;height:140px;background:${sign.color};border-radius:12px;
      margin:auto;display:flex;align-items:center;justify-content:center;
      flex-direction:column;transform:rotateY(45deg);
      animation:spin 10s linear infinite, fadeIn 0.6s ease;">
      <img src="${sign.img}" alt="${sign.name}" style="width:100px;height:100px;object-fit:contain;">
      <p style="margin:6px 0 0 0;font-size:1.2em;color:#000;font-weight:bold;
        text-shadow:0 1px 0 #FFD700, 0 -1px 0 #FFD700, 1px 0 0 #FFD700, -1px 0 0 #FFD700,
                    1px 1px 0 #FFD700, 1px -1px 0 #FFD700, -1px 1px 0 #FFD700, -1px -1px 0 #FFD700;">${sign.name}</p>
    </div>`;
};

// Controllo musica
const music = document.getElementById("bgMusic");
music.volume = 0.6;
const btn = document.getElementById("musicToggle");
let playing = false;

btn.onclick = () => {
  if (!playing) {
    music.play().then(() => {
      btn.textContent = "ðŸ”‡ Ferma Musica";
      playing = true;
    }).catch(err => console.log("Autoplay bloccato:", err));
  } else {
    music.pause();
    btn.textContent = "ðŸŽµ Avvia Musica";
    playing = false;
  }
};

// Fallback per autoplay
window.addEventListener('load', () => {
  document.body.addEventListener('click', function startMusic() {
    if (!playing) {
      music.play().then(() => {
        btn.textContent = "ðŸ”‡ Ferma Musica";
        playing = true;
      });
    }
    document.body.removeEventListener('click', startMusic);
  }, { once: true });
});
</script>
</body>
</html>